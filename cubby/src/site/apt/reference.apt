                                    ------
                             リファレンスマニュアル
                                    ------
                                    agata
                                    ------
                                  2007-09-20

コントローラー (Action)

 コントローラーはorg.seasar.cubby.action.Actionを継承して作成します。

*アクションメソッド

 リクエストされた URL に応じて、アクションメソッドが呼び出され処理を実行します。\
 Action クラスの中で public で戻り値が ActionResult のメソッドが、アクションメソッドとして認識されます。
 
*ActionResult の種類

 以下のクラスはActionResultを実装するクラスで、アクションメソッドの戻り値として使用できます。

*-------------------------------------------------------------------+--------------------------------------------------------------------+
| <<クラス名>>                                                      | <<説明>>                                                           |
*-------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Forward.html}Forward}}   | 指定されたパスにフォワードします。                                 |
*-------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Redirect.html}Redirect}} | 指定されたパスにリダイレクトします。                               |
*-------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Direct.html}Direct}}     | 指定されたバイト配列をレスポンスとして返します。                   |
*-------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Json.html}Json}}         | 指定されたオブジェクトを Json 形式に変換してレスポンスを返します。 |
*-------------------------------------------------------------------+--------------------------------------------------------------------+

ビュー (JSP)

 Cubby のビューは JSP で作成します。

*JSP での暗黙オブジェクト一覧

*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| <<属性名>>            | <<説明>>                  	                                                               | <<型>>                               | <<スコープ>> | <<セットされるタイミング>> |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| action                | forward したアクションのオブジェクト                                                      | org.seasar.cubby.action.Action       | request      | forward の直前             |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| action のプロパティ名 | Action で public なゲッターがあるプロパティは自動的にリクエストスコープにセットされます。 |                                      |              |                            |
|                       | （例）getXyz -> xyz                                                                       | それぞれのプロパティの型             | request      | forward の直前             |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| actionErrors          | エラー保持オブジェクト                                                                    | org.seasar.cubby.action.ActionErrors | request      | forward の直前             |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| flash                 | リダイレクト時にメッセージなどを受け渡しするためのMap。                                   |                                      |              |                            |
|                       | この Map は１度 get すると Map から自動的に除去(remove)されます。                         | java.util.Map                        | session      | action メソッドの実行前    |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| contextPath           | request.getContextPath()の値                                                              | java.lang.String                     | request      | action メソッドの実行前    |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+
| messages              | messages.propertiesをMapにしたもの。                                                      | java.util.Map                        | request      | action メソッドの実行前    |
|                       | request のロケールに対応。                                      	　                     |                                      |              |                            |
*-----------------------+-------------------------------------------------------------------------------------------+--------------------------------------+--------------+----------------------------+

アノテーション

*アノテーション一覧

*------------------------------------------------------------------------+--------------------------------------------------------------------+
| <<アノテーション名>>                                                   | <<説明>>                                                           |
*------------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Url.html}@Url}}               | アクションメソッドのURLを指定します。                              |
*------------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Form.html}@Form}}             | リクエストパラメータのオブジェクトへのバインディングを指定します。 |
*------------------------------------------------------------------------+--------------------------------------------------------------------+
| {{{cubby/apidocs/org/seasar/cubby/action/Validation.html}@Validation}} | 入力検証を指定します。                                             |
*------------------------------------------------------------------------+--------------------------------------------------------------------+

 * @Url

*------------------+--------------------+----------+-------------------+----------------------------------------------------------------------------------------------------------------+
| <<パラメータ名>> | <<型>>             | <<必須>> | <<デフォルト>>    | <<説明>>                                                                                                       |
*------------------+--------------------+----------+-------------------+----------------------------------------------------------------------------------------------------------------+
| value            | String             | ○       | -                 | アクションメソッドのバインディング用URLを指定します。                                                          |
|                  |                    |          |                   | URLはアクションクラスのURL＋アクションメソッドのURLで決定されます。                                            |
|                  |                    |          |                   | ただし、先頭が『/』の場合コンテキストルートからの絶対パスとして解釈されます。                                  |
|                  |                    |          |                   | \{パラメータ名,正規表現\}でプレースホルダーの指定ができます。                                                  |
|                  |                    |          |                   | 正規表現にマッチした場合、マッチした箇所が指定されたパラメータ名に追加され、アクションメソッドが実行されます。 |
|                  |                    |          |                   | 正規表現は省略可能です。省略した場合「0-9a-zA-Z」と同じ意味になります。                                        |
*------------------+--------------------+----------+-------------------+----------------------------------------------------------------------------------------------------------------+
| method           | enum RequestMethod | ×       | RequestMethod.ALL | アクションメソッドが対応するHTTPのメソッドを指定します。                                                       |
|                  |                    |          |                   | RequestMethod.GET/RequestMethod.POST/RequsetMethod.ALLの３種類を指定できます。                                 |
|                  |                    |          |                   |（この設定はcubby0.8では未実装。0.8までアクションメソッドはGET、POSTを意識せずに実行されます。                  |
|                  |                    |          |                   | つまり、RequestMethod.ALLです。）                                                                              |
*------------------+--------------------+----------+-------------------+----------------------------------------------------------------------------------------------------------------+


カスタムファンクション

バリデーション

設定ファイル
